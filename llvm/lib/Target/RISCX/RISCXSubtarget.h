#ifndef LLVM_LIB_TARGET_RISCX_RISCXSUBTARGET_H
#define LLVM_LIB_TARGET_RISCX_RISCXSUBTARGET_H

#include "MCTargetDesc/RISCXBaseInfo.h"
#include "RISCXFrameLowering.h"
#include "RISCXISelLowering.h"
#include "RISCXInstrInfo.h"
#include "llvm/CodeGen/GlobalISel/CallLowering.h"
#include "llvm/CodeGen/SelectionDAGTargetInfo.h"
#include "llvm/CodeGen/TargetSubtargetInfo.h"
#include "llvm/IR/DataLayout.h"
#include "llvm/Target/TargetMachine.h"
#include <bitset>

#define GET_SUBTARGETINFO_HEADER
#include "RISCXGenSubtargetInfo.inc"

namespace llvm {
class StringRef;

class RISCXSubtarget : public RISCXGenSubtargetInfo {
private:

  RISCXABI::ABI TargetABI = RISCXABI::ABI_Unknown;
  std::bitset<RISCX::NUM_TARGET_REGS> UserReservedRegister;

  RISCXFrameLowering FrameLowering;
  RISCXInstrInfo InstrInfo;
  RISCXRegisterInfo RegInfo;
  RISCXTargetLowering TLInfo;
  SelectionDAGTargetInfo TSInfo;

public:
  RISCXSubtarget(const Triple &TT, StringRef CPU, StringRef FS, const TargetMachine &TM);

  /// Definition of function is auto generated by tblgen.
  void ParseSubtargetFeatures(StringRef CPU, StringRef TuneCPU, StringRef FS);

  const RISCXFrameLowering *getFrameLowering() const override { return &FrameLowering; }
  const RISCXInstrInfo *getInstrInfo() const override { return &InstrInfo; }
  const RISCXRegisterInfo *getRegisterInfo() const override { return &RegInfo; }
  const RISCXTargetLowering *getTargetLowering() const override { return &TLInfo; }
  const SelectionDAGTargetInfo *getSelectionDAGInfo() const override { return &TSInfo; }

  MVT getXLenVT() const { return MVT::i64; }
  unsigned getXLen() const { return 64; }
  RISCXABI::ABI getTargetABI() const { return TargetABI; }

  unsigned getMaxBuildIntsCost() const;
};
} // End llvm namespace

#endif  // LLVM_LIB_TARGET_RISCX_RISCXSUBTARGET_H